<p-toast key="compacct-toast" baseZIndex="99999">
</p-toast>
<p-toast position="center" key="c" (onClose)="onReject()" [modal]="true" [autoZIndex]="true">
    <ng-template let-message pTemplate="message">
        <div style="text-align: center">
            <i class="pi pi-exclamation-triangle" style="font-size: 3em"></i>
            <h3>{{message.summary}}</h3>
            <p>{{message.detail}}</p>
        </div>

        <div class="ui-g ui-fluid" >
          <div class="ui-g-6">
            <button type="button" pButton (click)="onConfirmDel()" label="Yes" class="ui-button-success"></button>
        </div>
          <div class="ui-g-6">
              <button type="button" pButton (click)="onReject()" label="No" class="ui-button-secondary"></button>
          </div>
      </div>

    </ng-template>
</p-toast>
<p-toast position="center" key="s" (onClose)="onReject()" [modal]="true" [autoZIndex]="true">
    <ng-template let-message pTemplate="message">
        <div style="text-align: center">
            <i class="pi pi-exclamation-triangle" style="font-size: 3em"></i>
            <h3>{{message.summary}}</h3>
            <p>{{message.detail}}</p>
        </div>

        <div class="ui-g ui-fluid">
          <div class="ui-g-6">
            <button type="button" pButton (click)="onConfirmSave()" [disabled]="popouSpinner" label="Yes" class="ui-button-success">
            </button>
        </div>
          <div class="ui-g-6">
              <button type="button" pButton (click)="onReject()" label="No" class="ui-button-secondary"></button>
          </div>
      </div>
    </ng-template>
</p-toast>
<p-toast position="center" key="se" (onClose)="onReject()" [modal]="true" [autoZIndex]="true">
    <ng-template let-message pTemplate="message">
        <div style="text-align: center">
            <i class="pi pi-exclamation-triangle" style="font-size: 3em"></i>
            <h3>{{message.summary}}</h3>
            <p>{{message.detail}}</p>
        </div>
        <table class="table table-bordered">
            <tbody>
            <tr *ngFor='let data of withoutbatchpro'>
                <td nowrap>{{data}}</td>
             </tr>
            </tbody>
        </table>
        <div class="ui-g ui-fluid">
            <div class="ui-g-12">
                <button type="button" pButton (click)="onReject()" label="ok" class="ui-button-danger" style="font-size: 20px;"></button>
            </div>
      </div>
    </ng-template>
</p-toast>

<div class="row">
    <div class="col-xs-12">
        <div class="box box-primary">
            <div class="form-horizontal">
                <div class="box-body">
                    <p-tabView [activeIndex]="tabIndexToView" (onChange)="TabClick($event)">
                        <p-tabPanel headerStyleClass="compacct-tabs" [header]="items[0]" leftIcon="glyphicon glyphicon-list-alt">
                            <form name="SearchSaleBillNewForm" #SearchSaleBillNewForm="ngForm" novalidate>
                                <div class="form-group">
                                    <div class="col-sm-3">
                                        <label class="control-label">Date</label>
                                         <app-compacct-daterangepicker (DaterangeObj)="getDateRange($event)" [HardCodeDateOpt]="initDate"> <!-- [minmaxValid]= "initDateValid" required -->
                                        </app-compacct-daterangepicker>
                                    </div>
                                    <div class="col-sm-3">
                                        <label class="control-label">CostCenter Name</label>
                                        <select class="form-control" name="browsecostcenter" #browsecostcenter="ngModel" [(ngModel)]="ObjBrowseSaleBillNew.Cost_Cen_ID" [attr.disabled]="$CompacctAPI.CompacctCookies.User_Type != 'A'" 
                                             [ngClass]="{'clearance': SearchSaleBillNewFormSubmitted && browsecostcenter?.errors?.required}" >
                                              <option  [ngValue]="undefined">Select</option>
                                              <option  *ngFor="let option of CostCenterList" value="{{option.Cost_Cen_ID}}">
                                                {{option.Cost_Cen_Name}}
                                              </option>
                                        </select>
                                    </div>
                                    <div class="col-sm-2">
                                        <div class="col-sm-3">
                                            <button class="btn btn-primary custombutton" data-toggle="modal" (click)="GetSerarchSaleBillNew(SearchSaleBillNewForm.form.valid)" id="load" [disabled]="seachSpinner">
                                          <p-progressSpinner *ngIf="seachSpinner" [style]="{width: '15px', height: '15px'}" strokeWidth="8"  animationDuration=".5s"></p-progressSpinner>
                                          <span *ngIf="!seachSpinner" class="glyphicon glyphicon-search"></span>&nbsp;Search
                                       </button>
                                        </div>
                                    </div>
                                </div>
                                </form>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <h5><strong></strong></h5>
                                    </div>
                                </div>
                                <!-- <div *ngIf="SerarchsaleBillNewList.length && openProject == 'Y'" style="margin-top:5px;margin-bottom:10px">
                                    <fieldset class="col-md-12">
                                      <legend>Filter</legend>
          
                                      <div class="form-group">
                                        <div class="col-sm-4">
                                          <label class="control-label">Project <span class="text-danger"></span></label>
                                          <p-multiSelect
                                          [options]="DistProject"
                                          [(ngModel)]="SelectedDistProject"
                                          [virtualScroll]="true"
                                          itemSize="30"
                                          (onChange)='GlobalFilterChangenUpdate()'
                                          [styleClass]="'compacct-multiselect'"
                                          name="Project"></p-multiSelect>
                                        </div>
                                        <div class="col-sm-4">
                                          <label class="control-label">Sub Ledger <span class="text-danger"></span></label>
                                          <p-multiSelect
                                          [options]="DistSubledger"
                                          [(ngModel)]="SelectedSubledger"
                                          [virtualScroll]="true"
                                          itemSize="30"
                                          (onChange)='GlobalFilterChangenUpdate()'
                                          [styleClass]="'compacct-multiselect'"
                                          name="Sub_Ledger"></p-multiSelect>
                                        </div>
                                         </div>
                                        </fieldset>
                                  </div> -->
                                  <div class="clearfix"></div>
                                <div class="table-id">
                                    <p-table [value]="SerarchsaleBillNewList"
                                    [paginator]="true" [rows]="100" [columns]="cols"
                                    [loading]="seachSpinner" [rowHover]="true" 
                                    [autoLayout]="true" sortMode="multiple" 
                                    [rowsPerPageOptions]="[100, 300, 500]"  
                                    [globalFilterFields]='["Doc_No","Doc_Date","Sub_Ledger_Name","Cost_Cen_Name","Bill_Net_Amt","Supp_Ref_No","Supp_Ref_Date","Document","Fin_Year_Name"]'
                                        [rowHover]="true" #dt2>
                                        <ng-template pTemplate="caption">
                                            <div class="row">
                                                <div class="col-sm-3 pull-right" style="text-align: right">
                                                    <input type="text" pInputText size="50" placeholder="Search" (input)="dt2.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                                </div>
                                            </div>
        
                                        </ng-template>
                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                <th style="width:5em">Action</th>
                                                <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                                                    {{col.header}}
                                                    <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                                                </th>
                                                <!-- <th nowrap="nowrap">Doc No</th> 
                                                <th nowrap="nowrap">Doc Date</th>
                                                <th nowrap="nowrap">Sub Ledger</th>
                                                <th nowrap="nowrap">Cost Center</th>
                                                <th nowrap="nowrap">Member Name</th>
                                                <th nowrap="nowrap">Net Amount</th>
                                                <th nowrap="nowrap">Image</th>
                                                <th nowrap="nowrap">Fin Year</th> -->
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-col>
                                            <tr>
        
                                                <td>
                                                    <div class="dropdown">
                                                        <button class="btn btn-default btn-sm tableButton dropdown-toggle" type="button" data-toggle="dropdown" style="height:27px">
                                                                        <i class="fa fa-fw fa-bars"></i>
                                                                        <span class="caret"></span>
                                                                    </button>
                                                        <ul class="dropdown-menu">
                                                            <li *ngIf="col.Fin_Year_ID == $CompacctAPI.CompacctCookies.Fin_Year_ID && $CompacctAPI.CompacctCookies.User_Type == 'A' && $CompacctAPI.CompacctCookies.Del_Right == 'Y' && !col.E_Invoice_PDF_Link">
                                                                    <a (click)="EditSaleBill(col)">
                                                                        <i class="fa fa-fw fa-pencil"></i> Edit
                                                                    </a>
                                                                </li>
                                                            <li *ngIf="col.Fin_Year_ID == $CompacctAPI.CompacctCookies.Fin_Year_ID && $CompacctAPI.CompacctCookies.User_Type == 'A' && $CompacctAPI.CompacctCookies.Del_Right == 'Y' && !col.E_Invoice_PDF_Link">
                                                                <a (click)="DeleteSaleBill(col)">
                                                                    <i class="fa fa-fw fa-trash"></i> Delete
                                                                </a>
                                                            </li>
                                                            <li>
                                                                <a (click)="PrintSaleBillNew(col.Doc_No)">
                                                                    <i class="fa fa-fw fa-file-pdf-o"></i> PDF
                                                                </a>
                                                            </li>
                                                            <li>
                                                                <a (click)="PrintSaleBill(col.Doc_No)">
                                                                    <i class="fa fa-fw fa-file-pdf-o"></i> CP
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </td>
                                                <!-- <ng-container pTemplate="body" let-col> -->
                                                    <td width="8%">{{col.Doc_No}}</td>
                                                    <td width="10%">{{col.Doc_Date | date : 'dd/MMM/yyyy'}}</td>
                                                    <td width="16%">{{col.Sub_Ledger_Name}}</td>
                                                    <td width="16%">{{col.Cost_Cen_Name}}</td>
                                                    <td width="14%">{{col.Member_Name ? col.Member_Name : '-'}}</td>
                                                    <td width="12%">{{col.Net_Amt}}</td>
                                                    <!-- <td>{{col.Supp_Ref_No}}</td>
                                                    <td>{{col.Supp_Ref_Date | date : 'dd/MMM/yyyy'}}</td>
                                                    <td>{{col.Document ? col.Document : '-'}}</td> -->
                                                    <td width="10%">{{col.Sale_Bill_Upload ? col.Sale_Bill_Upload : '-'}}</td>
                                                    <td width="14%">{{col.Fin_Year_Name ? col.Fin_Year_Name : '-'}}</td>
                                                <!-- </ng-container> -->
                                                
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="paginatorright" let-state>
                                            Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of {{state.totalRecords}}
                                        </ng-template>
                                    </p-table>
                                </div>

                        </p-tabPanel>

                        <p-tabPanel headerStyleClass="compacct-tabs" [header]="items[1]" leftIcon="glyphicon glyphicon-floppy-save">
                                        <form name="SaleBillNewForm" #SaleBillNewForm="ngForm" novalidate>
                                            <div class="form-group" style="padding: 1em;">
                                                <h5 style="
                                                padding: 0.5em 1em;
                                                background: #c1c1c185;
                                                border-top: 5px solid #3c8dbc;
                                                border-bottom: 1px solid #c6c6c6;
                                                margin-top: -10px;
                                                ">
                                                <i class="fa fa-fw fa-fax">
                                                </i> &nbsp;<strong>Customer Details :</strong>
                                            </h5>
                                            <div class="form-group">
                                                <div class="col-sm-6">
                                                    <label class="control-label">Customer <sup class="text-danger">*</sup></label>
                                                    <p-dropdown [options]="CustomerList" name="customer" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_ID" [showClear]="true" [emptyFilterMessage]="' No Customer Found'" (onChange)="CustomerChange()" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true" [placeholder]="'Select Customer'"
                                                        [virtualScroll]="true" itemSize="30" #customer="ngModel"  [required]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && customer?.errors?.required}" required>
                                                    </p-dropdown>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Due Amount </label>
                                                    <input class="form-control" name="dueamt" #dueamt="ngModel" CompacctDigitonly="true" [(ngModel)]="ObjSaleBillNew.Due_Amount" placeholder="Due Amount" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && dueamt?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Billing Name </label>
                                                    <input class="form-control" name="billingname" #billingname="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_Billing_Name" placeholder="Billing Name" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && billingname?.errors?.required}" >
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">Billing State </label>
                                                    <input class="form-control" name="billingstate" #billingstate="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_Billing_State" placeholder="Billing State" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && billingstate?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">SEZ<sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="sez" #sez="ngModel" [(ngModel)]="ObjSaleBillNew.IS_SEZ" [disabled]="true" [ngClass]="{'clearance': SaleBillNewFormSubmitted && sez?.errors?.required}" required>
                                                          <option  [ngValue]="undefined">Select</option>
                                                          <option value="true">Yes</option>
                                                          <option value="false">No</option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Choose Address<sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="chooseaddress" #chooseaddress="ngModel" (change)="ChooseAddressChange()" [(ngModel)]="ObjSaleBillNew.Choose_Address" [ngClass]="{'clearance': SaleBillNewFormSubmitted && chooseaddress?.errors?.required}" required>
                                                          <option  [ngValue]="undefined">Select</option>
                                                          <option  *ngFor="let option of ChooseAddressList" value="{{option.Address_Caption}}">
                                                            {{option.Address_Caption}}
                                                          </option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">State<sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="state" #state="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_State"  [disabled]="subledstatedisabled" [ngClass]="{'clearance': SaleBillNewFormSubmitted && state?.errors?.required}" required>
                                                         <option  [ngValue]="undefined">Select</option>
                                                            <option  *ngFor="let option of StateList" value="{{option.state}}">
                                                            {{option.state}}
                                                            </option>
                                                     </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">GST No </label>
                                                    <input class="form-control" name="gstno" #gstno="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_GST_No" placeholder="GST No" [disabled]="maindisabled" [ngClass]="{'clearance':SaleBillNewFormSubmitted && gstno?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Address </label>
                                                    <input class="form-control" name="address" #address="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_Address_1" placeholder="Address" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && address?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Land Mark </label>
                                                    <input class="form-control" name="landmark" #landmark="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_Land_Mark" placeholder="Land Mark" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && landmark?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">PIN </label>
                                                    <input class="form-control" name="pin" #pin="ngModel" [disabled]="true" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_Pin" placeholder="PIN" [disabled]="maindisabled" [ngClass]="{'clearance':SaleBillNewFormSubmitted && pin?.errors?.required}" required>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">District </label>
                                                    <input class="form-control" name="district" #district="ngModel" [disabled]="true" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_District" placeholder="District" [disabled]="maindisabled" [ngClass]="{'clearance':SaleBillNewFormSubmitted && district?.errors?.required}" required>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Country </label>
                                                    <input class="form-control" name="country" #country="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_Country" placeholder="Country" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && country?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Email </label>
                                                    <input class="form-control" name="email" #email="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_Email" placeholder="Email" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && email?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Contact No </label>
                                                    <input class="form-control" name="contactno" #contactno="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_Mobile_No" placeholder="Contact No" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && contactno?.errors?.required}" >
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">PAN No </label>
                                                    <input class="form-control" name="panno" #panno="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_PAN_No" placeholder="PAN No" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && panno?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">CIN </label>
                                                    <input class="form-control" name="cin" #cin="ngModel" [(ngModel)]="ObjSaleBillNew.Sub_Ledger_CIN_No" placeholder="CIN" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && cin?.errors?.required}" >
                                                </div>
                                            </div>
                                            </div>

                                            <div class="form-group" style="padding: 1em;">
                                                <h5 style="
                                                padding: 0.5em 1em;
                                                background: #c1c1c185;
                                                border-top: 5px solid #3c8dbc;
                                                border-bottom: 1px solid #c6c6c6;
                                                margin-top: -10px;
                                                ">
                                                <i class="fa fa-fw fa-fax">
                                                </i> &nbsp;<strong>CostCenter and Others Details:</strong>
                                            </h5>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">CostCenter<sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="costcenter" #costcenter="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_ID" [disabled]="$CompacctAPI.CompacctCookies.User_Type != 'A'" 
                                                        [ngClass]="{'clearance': SaleBillNewFormSubmitted && costcenter?.errors?.required}" (change)="GetCosCenAddress()" required>
                                                          <option  [ngValue]="undefined">Select</option>
                                                          <option  *ngFor="let option of CostCenterList" value="{{option.Cost_Cen_ID}}">
                                                            {{option.Cost_Cen_Name}}
                                                          </option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Address </label>
                                                    <input class="form-control" name="costcenaddress" #costcenaddress="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_Address1" placeholder="Address" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && costcenaddress?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Address </label>
                                                    <input class="form-control" name="address2" #address2="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_Address2" placeholder="Address" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && address2?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">State </label>
                                                    <input class="form-control" name="costcenstate" #costcenstate="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_State" placeholder="State" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && costcenstate?.errors?.required}">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">GST No </label>
                                                    <input class="form-control" name="costcengstno" #costcengstno="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_GST_No" placeholder="GST No" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && costcengstno?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Location </label>
                                                    <input class="form-control" name="location" #location="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_Location" placeholder="Location" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && location?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">PIN </label>
                                                    <input class="form-control" name="costcenpin" #costcenpin="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_PIN" placeholder="PIN" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && costcenpin?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">District </label>
                                                    <input class="form-control" name="costcendistrict" #costcendistrict="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_District" placeholder="District" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && costcendistrict?.errors?.required}">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">Country </label>
                                                    <input class="form-control" name="costcencountry" #costcencountry="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_Country" placeholder="Country" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && costcencountry?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Mobile </label>
                                                    <input class="form-control" name="costcenmobile" #costcenmobile="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_Mobile" placeholder="Mobile" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && costcenmobile?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Phone </label>
                                                    <input class="form-control" name="costcenphone" #costcenphone="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_Phone" placeholder="Phone" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && costcenphone?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Email </label>
                                                    <textarea class="form-control" name="costcenemail" #costcenemail="ngModel" [(ngModel)]="ObjSaleBillNew.Cost_Cen_Email" placeholder="Email" [disabled]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && costcenemail?.errors?.required}" ></textarea>
                                                </div>
                                            </div>
                                            </div>

                                            <hr class="box boxboxDivide-primary ng-scope">
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">Doc Date <sup class="text-danger">*</sup></label>
                                                    <div class="input-group date">
                                                        <div class="input-group-addon">
                                                         <i class="fa fa-calendar"></i>
                                                    </div>
                                                    <ejs-datepicker [format]="'dd/MMM/yyyy'" [(value)]='DocDate'></ejs-datepicker>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Project</label>
                                                    <select class="form-control" name="project" #project="ngModel" [(ngModel)]="ObjSaleBillNew.Project_ID" [ngClass]="{'clearance': SaleBillNewFormSubmitted && project?.errors?.required}">
                                                          <option  [ngValue]="undefined">Select</option>
                                                          <option  *ngFor="let option of ProjectList" value="{{option.Project_ID}}">
                                                            {{option.Project}}
                                                          </option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-3"> 
                                                    <label class="control-label">Own Delivery</label> <br>
                                                    <p-checkbox name="owndelivery" [(ngModel)]="Own_Delivery" binary="true"></p-checkbox> &nbsp;&nbsp;
                                                            <span>Make Own Delivery</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">CN No </label>
                                                    <input class="form-control" name="cnno" #cnno="ngModel" [(ngModel)]="ObjSaleBillNew.CN_No" placeholder="CN No" [ngClass]="{'clearance':SaleBillNewFormSubmitted && cnno?.errors?.required}" >
                                                </div>
                                            </div>
                                                <div class="form-group">
                                                    <div class="col-sm-3">
                                                        <label class="control-label">CN Date </label>
                                                        <div class="input-group date">
                                                            <div class="input-group-addon">
                                                             <i class="fa fa-calendar"></i>
                                                        </div>
                                                        <ejs-datepicker [format]="'dd/MMM/yyyy'" [(value)]='CNDate' placeholder="dd/MMM/yyyy"></ejs-datepicker>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label class="control-label">Acceptance of Order No. </label>
                                                        <p-dropdown [options]="AcceptanceOrderNoList" name="acceptorderno" [(ngModel)]="ObjSaleBillNew.Acceptance_Order_No" [showClear]="true" [emptyFilterMessage]="' No Acceptance of order no. Found'" (onChange)="GetAcceptanceOrderDate()" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true" [placeholder]="'Select Acceptance of order No'"
                                                            [virtualScroll]="true" itemSize="30" #acceptorderno="ngModel" [disabled]="AddProductDetails.length" [required]="true" [ngClass]="{'clearance':SaleBillNewFormSubmitted && acceptorderno?.errors?.required}" required>
                                                        </p-dropdown>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label class="control-label">Acceptance of Order Date <sup class="text-danger">*</sup></label>
                                                        <div class="input-group date">
                                                            <div class="input-group-addon">
                                                             <i class="fa fa-calendar"></i>
                                                        </div>
                                                        <ejs-datepicker [format]="'dd/MMM/yyyy'" [(value)]='Acceptance_Order_Date' [enabled]="aodateenabled" placeholder="dd/MMM/yyyy"></ejs-datepicker>
                                                        </div>
                                                    </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Revenue Cost Center <sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="revcostcen" #revcostcen="ngModel" [(ngModel)]="ObjSaleBillNew.Revenue_Cost_Cent_ID" [ngClass]="{'clearance': SaleBillNewFormSubmitted && revcostcen?.errors?.required}" (change)="GetGodown()" required>
                                                          <option  [ngValue]="undefined">Select</option>
                                                          <option  *ngFor="let option of CostCenterList" value="{{option.Cost_Cen_ID}}">
                                                            {{option.Cost_Cen_Name}}
                                                          </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">Payment Terms </label>
                                                    <textarea name="pamentterms" style="height:38px" row='4' class="form-control" Placeholder="Payment Terms" [(ngModel)]="ObjSaleBillNew.Payment_Terms"> </textarea>
    
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Dispatch Through </label>
                                                    <input class="form-control" name="dispatchtrough" #dispatchtrough="ngModel" placeholder="Dispatch Through" [(ngModel)]="ObjSaleBillNew.Supp_Ref_No" [ngClass]="{'clearance':SaleBillNewFormSubmitted && dispatchtrough?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Customer Order No</label>
                                                    <input class="form-control" name="suppreference" #suppreference="ngModel" [(ngModel)]="ObjSaleBillNew.Supp_Ref_No" placeholder="Supplier Reference" [ngClass]="{'clearance':SaleBillNewFormSubmitted && suppreference?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Other Reference</label>
                                                    <input class="form-control" name="otherreference" #otherreference="ngModel" [(ngModel)]="ObjSaleBillNew.Other_Reference" placeholder="Other Reference" [ngClass]="{'clearance':SaleBillNewFormSubmitted && otherreference?.errors?.required}" >
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-6">
                                                    <label class="control-label">Remarks </label>
                                                    <textarea name="remarks" style="height:38px" row='4' class="form-control" Placeholder="Remarks" [(ngModel)]="ObjSaleBillNew.Remarks"> </textarea>
    
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Container No </label>
                                                    <textarea name="containerno" style="height:38px" row='4' class="form-control" Placeholder="Container No" [(ngModel)]="ObjSaleBillNew.Container_No"> </textarea>
    
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Waybill No </label>
                                                    <textarea name="waybillno" style="height:38px" row='4' class="form-control" Placeholder="Waybill No" [(ngModel)]="ObjSaleBillNew.Waybill_No"> </textarea>
    
                                                </div>
                                            </div> 
                                            <!-- </div> -->
                                        </form>
                                        <br>
                                        <hr class="box boxboxDivide-primary ng-scope">
                                        <form #ProductForm="ngForm" #ProductForm="ngForm" novalidate>
                                        <div class="form-group">
                                            <div class="col-sm-6">
                                                <label class="control-label">CostCenter<sup class="text-danger">*</sup></label>
                                                <select class="form-control" name="Productcostcenter" #Productcostcenter="ngModel" [(ngModel)]="ObjProductInfo.Cost_Cen_ID" [disabled]="$CompacctAPI.CompacctCookies.User_Type != 'A'" 
                                                    [ngClass]="{'clearance': ProductInfoSubmitted && Productcostcenter?.errors?.required}" (change)="GetCosCenAddress()" required>
                                                      <option  [ngValue]="undefined">Select</option>
                                                      <option  *ngFor="let option of CostCenterList" value="{{option.Cost_Cen_ID}}">
                                                        {{option.Cost_Cen_Name}}
                                                      </option>
                                                </select>
                                            </div>
                                            <!-- <div [ngClass]="ProductExpirydisabled ? 'col-sm-3' : 'col-sm-6'"> (onChange)="ProductChange()"-->
                                                <div class="col-sm-4">
                                                <label class="control-label"
                                                  >Product Details&nbsp;<sup class="text-danger">*</sup> &nbsp;&nbsp;&nbsp;
                                                  <span><a *ngIf="ObjSaleBillNew.Acceptance_Order_No" (click)="ProductRefresh()">{{Productbutton}}</a></span> 
                                                </label>
                                                <p-dropdown
                                                  [options]="Productlist"
                                                  name="product"
                                                  [(ngModel)]="ObjProductInfo.Product_ID"
                                                  [showClear]="true"
                                                  [emptyFilterMessage]="'No Product Found'"
                                                  [filter]="true"
                                                  filterBy="label,value.name"
                                                  [showClear]="true"
                                                  [resetFilterOnHide]="true"
                                                  [placeholder]="'Select Product'"
                                                  [virtualScroll]="true"
                                                  itemSize="30"
                                                  #product="ngModel"
                                                  [styleClass]="ProductInfoSubmitted && product.errors?.required ? 'clearance': ''"[required]="true">
                                                  <ng-template let-col pTemplate="item">
                                                    <div (click)="GetProductDetailsChange(col)" class="ui-helper-clearfix"  >
                                                        <div  style="font-size:14px;margin-top:4px">{{col.label}}</div>
                                                    </div>
                                                </ng-template>
                                                </p-dropdown>
                                              </div>
                                              <div class="col-sm-2">
                                                <label class="control-label">HSN No<sup class="text-danger"></sup></label>
                                                <input class="form-control" name="HSNNo" #HSNNo="ngModel"
                                                  [ngClass]="{clearance:ProductInfoSubmitted && HSNNo?.errors?.required}"
                                                  [(ngModel)]="ObjProductInfo.HSN_No"
                                                  [required]="false"
                                                  [disabled]="true"
                                                  placeholder="HSN No"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div Class="col-sm-3">
                                                <label class="control-label">Product Specification<sup class="text-danger"></sup></label>
                                                <input
                                                  class="form-control"
                                                  name="Description"
                                                  #Description="ngModel"
                                                  [(ngModel)]="ObjProductInfo.Product_Specification"
                                                  [required]="true"
                                                  placeholder="Product Specification"/>
                                              </div>
                                              <div class="col-sm-3">
                                                <label class="control-label">Stock Point<sup class="text-danger">*</sup></label>
                                                <select class="form-control" 
                                                name="godown" 
                                                #godown="ngModel" 
                                                [(ngModel)]="ObjProductInfo.Godown_Id"
                                                (change)="GetBatchNo()"
                                                [ngClass]="{clearance:ProductInfoSubmitted && godown?.errors?.required}" required
                                                >
                                                <option  [ngValue]="undefined">Select</option>
                                                   <option *ngFor = "let option of GodownList" [value] ="option.godown_id">
                                                      {{option.godown_name}}
                                                    </option>
                                              </select>
                                            </div>
                                            <div class="col-sm-4">
                                                <label class="control-label">Batch No <sup class="text-danger">*</sup></label>
                                                <select class="form-control" 
                                                name="batchno" 
                                                #batchno="ngModel" 
                                                [(ngModel)]="ObjProductInfo.Batch_Number"
                                                [disabled]="Is_Service"
                                                [ngClass]="{clearance:ProductInfoSubmitted && batchno?.errors?.required}" required>
                                                <option  [ngValue]="undefined">Select</option>
                                                   <option *ngFor = "let option of BatchNoList" [value] ="option.Batch_No">
                                                      {{option.Batch_No_Show}}
                                                    </option>
                                              </select>
                                            </div>
                                            <div class="col-sm-2">
                                                <label class="control-label">Quantity<sup class="text-danger">*</sup></label>
                                                <input class="form-control" 
                                                name="qty" #qty="ngModel" 
                                                [(ngModel)]="ObjProductInfo.Qty" (ngModelChange)="CalCulateTotalAmt()"
                                                [ngClass]="{clearance:(ProductInfoSubmitted && qty?.errors?.required) || chkqut() }" [disabled]="Maintain_Serial_No" [required]="true"
                                                  CompacctDigitonly="true" placeholder="Quantity"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-3">
                                                <label class="control-label">Unit<sup class="text-danger">*</sup></label>
                                              <input class="form-control" name="unit" #unit="ngModel" [(ngModel)]="ObjProductInfo.UOM"
                                                [ngClass]="{clearance:ProductInfoSubmitted && unit?.errors?.required}"
                                                 disabled="true" placeholder="Unit" />
                                            </div>
                                            <div class="col-sm-3">
                                                <label class="control-label">Rate<sup class="text-danger">*</sup></label>
                                                <input class="form-control" name="rate" type="text"
                                                  [ngClass]="{clearance:ProductInfoSubmitted && rate?.errors?.required}"
                                                  #rate="ngModel"
                                                  [(ngModel)]="ObjProductInfo.Rate"
                                                  (ngModelChange)="CalCulateTotalAmt()"
                                                  CompacctDigitonly="true"
                                                  [required]="true"
                                                  placeholder="Rate"
                                                  [disabled]="ObjProductInfo.Pur_Order_No"
                                                />
                                              </div>
                                            <div class="col-sm-3">
                                              <label class="control-label">Total Amount<sup class="text-danger">*</sup></label>
                                              <input class="form-control" name="tolamt" #tolamt="ngModel" [(ngModel)]="ObjProductInfo.Amount" 
                                              [disabled]="true" CompacctDigitonly="true" placeholder="Total Amount"/>
                                            </div>
                                            <div class="col-sm-3">
                                                <label class="control-label">Discount Type </label>
                                                <select class="form-control" 
                                                name="DiscountType" 
                                                #DiscountType="ngModel" 
                                                [(ngModel)]="ObjProductInfo.Discount_Type"
                                                (ngModelChange)="DiscChange()">
                                                   <option  [ngValue]="undefined">Select</option>
                                                   <option value ="%">%</option>
                                                   <option value ="AMT">AMT</option>
                                              </select>
                                            </div>
                                              </div>
                                        <div class="form-group"> 
                                            <div class="col-sm-3">
                                                <label>Discount</label>
                                                <input type="text"
                                                class="form-control"
                                                name="Discount"
                                                #Discount="ngModel"
                                                [(ngModel)]="ObjProductInfo.Discount_Type_Amount"
                                                (ngModelChange)="AfterDiscCalChange()"
                                                [disabled]="!ObjProductInfo.Discount_Type"
                                                placeholder="Discount"
                                                CompacctDigitonly="true">
                                            </div>
                                            <div class="col-sm-3">
                                                <label class="control-label">Discount Amount</label>
                                                <input type="text"
                                                class="form-control"
                                                name="Discount_AMT"
                                                #Discount_AMT="ngModel"
                                                [(ngModel)]="ObjProductInfo.Discount"
                                                placeholder="Discount AMT"
                                                CompacctDigitonly="true"
                                                 disabled>
                                            </div>
                                        
                                            <div class="col-sm-3">
                                                <label class="control-label">Taxable Amount<sup class="text-danger"></sup></label>
                                                    <input type="text"
                                                class="form-control"
                                                name="taxable_AMT"
                                                #taxable_AMT="ngModel"
                                                [(ngModel)]="ObjProductInfo.Taxable_Amount"
                                                CompacctDigitonly="true"
                                                placeholder="Taxable AMT"
                                                disabled
                                                >
                                            </div>

                                              <!-- <div class="form-group">
                                                <div class="col-sm-3" *ngIf="Maintain_Serial_No">
                                                    <label class="control-label">Serial No<sup class="text-danger">*</sup></label>
                                                    <input class="form-control" name="serialno" #serialno="ngModel"
                                                      [ngClass]="{clearance:ProductInfoSubmitted && serialno?.errors?.required}"
                                                      [(ngModel)]="ObjProductInfo.Serial_No"
                                                      required
                                                      id = "serialnumber"
                                                      placeholder="Serial No"/>
                                                  </div>
                                                  <div class="col-sm-3" *ngIf="!Maintain_Serial_No">
                                                    <label class="control-label">Batch No.<sup class="text-danger">*</sup></label>
                                                    <input class="form-control" name="batchno" #batchno="ngModel"
                                                      [ngClass]="{clearance:ProductInfoSubmitted && batchno?.errors?.required}"
                                                      [(ngModel)]="ObjProductInfo.Batch_Number"
                                                      [required]="true"
                                                      [disabled]="Is_Service"
                                                      placeholder="Batch No"
                                                    />
                                                  </div>
                                                 <div class="col-sm-3" *ngIf="ProductExpirydisabled">
                                                  <label class="control-label"
                                                    >Expriy Date<sup class="text-danger">*</sup></label
                                                  >
                                                  <div class="input-group date">
                                                    <div class="input-group-addon">
                                                      <i class="fa fa-calendar"></i>
                                                    </div>
                                                    <input style="width: 90%;" type="month" name="exdate" #exdate="ngModel" [(ngModel)]="expiryDate" [ngClass]="{clearance:ProductInfoSubmitted && exdate?.errors?.required}" required>
                                                  </div>
                                                </div>
                                                </div>
                                                <div class="form-group">
                                        
                                        <div class="col-sm-2">
                                            <label>CESS Percentage<sup class="text-danger"></sup></label>
                                            <div class="input-group">
                                              <input class="form-control" name="CESSPercentage" #CESSPercentage="ngModel" [(ngModel)]="ObjProductInfo.CESS_Percentage"
                                               (ngModelChange)="CalculateCessAmt()" [disabled]="cessdisabled" CompacctDigitonly="true" placeholder="CESS">
                                              <span class="input-group-addon" id="basic-addon1">%</span>
                                            </div>
                                           
                                          </div>
                                          <div class="col-sm-2" style="width: 8.33333333%; margin-top: 5px; margin-left: -1.8pc;">
                                            <label></label>
                                            <input type="text"
                                            class="form-control"
                                            name="cessamt"
                                            #cessamt="ngModel"
                                            [(ngModel)]="ObjProductInfo.CESS_AMT"
                                            [disabled]="cessdisabled"
                                            placeholder="CESS"
                                            CompacctDigitonly="true"
                                            >
                                    </div> -->
                                                <div class="col-sm-3 pull-right">
                                                  <button
                                                    id="row-Add"
                                                    class="btn btn-primary custombutton pull-right"
                                                    (click)="AddProductInfo(ProductForm.form.valid)"
                                                  >
                                                    <span class="glyphicon glyphicon-plus"></span
                                                    >&nbsp;Add
                                                  </button>
                                                </div>
                                              </div>
                                            
                                            <br>
                                          </form>
                            <br>
                            <div class="table-responsive no-padding">
                                <table class="table table-bordered">
                                    <thead style="background-color:#3c8dbc;color:white;">
                                        <tr>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Sl.No.</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Product Details</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">HSN No</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Product Specification</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Batch No</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Serial No</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Qty</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Unit</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Rate</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Weight in Pound</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Acompanish</th>
                                            <!--<th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Expiry Date</th> -->
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Total Amt</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Discount Type</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Discount</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Discount Amt</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Taxable Amt</th>
                                            <th nowrap colspan="2" class="text-center" style="vertical-align:middle">CGST</th>
                                            <th nowrap colspan="2" class="text-center" style="vertical-align:middle">SGST</th>
                                            <th nowrap colspan="2" class="text-center" style="vertical-align:middle">IGST</th>
                                            <!-- <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Net Amount</th> -->
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Gross Amount</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Cost Center</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Stock Point</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">AO Product</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">AO Qty.</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">AO Order No.</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Delete</th>
                                        </tr>
                                        <tr>
                                            <th>Rate</th>
                                            <th>Amt</th>
                                            <th>Rate</th>
                                            <th>Amt</th>
                                            <th>Rate</th>
                                            <th>Amt</th>
                                            <!-- <th>Rate</th>
                                            <th>Amt</th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let obj of AddProductDetails ; let ind = index;">
                                            <td>{{ ind + 1 }}</td>
                                            <td>{{obj.Product_Name}}</td>
                                            <td>{{obj.HSL_No ? obj.HSL_No : '-'}}</td>
                                            <td *ngIf="databaseName !='K4C' && databaseName != 'K4C_Demo'">{{obj.Product_Specification}}</td>
                                            <td *ngIf="databaseName =='K4C' || databaseName =='K4C_Demo'">Wt. In lb : {{obj.Weight_in_Pound}} <br> Accompanies : {{obj.Acompanish}}</td>
                                            <td>{{obj.Batch_Number ? obj.Batch_Number : '-'}}</td>
                                            <td>{{obj.Serial_No ? obj.Serial_No : '-'}}</td>
                                            <!-- <td>{{obj.Qty}}</td> -->
                                            <td>
                                                <input type="text"
                                                  class="form-control"
                                                  name="obj.Qty"
                                                  [(ngModel)]="obj.Qty"
                                                  (ngModelChange)="calculateamount(obj)"
                                                  CompacctDigitonly="true"
                                                  style="width: 71px;">
                                            </td>
                                            <td>{{obj.UOM}}</td>
                                            <!-- <td>{{obj.Rate}}</td> -->
                                            <td>
                                                <input type="text"
                                                  class="form-control"
                                                  name="obj.Rate"
                                                  [(ngModel)]="obj.Rate"
                                                  (ngModelChange)="calculateamount(obj)"
                                                  CompacctDigitonly="true"
                                                  style="width: 71px;">
                                            </td>
                                            <td>{{obj.Weight_in_Pound ? obj.Weight_in_Pound : '-'}}</td>
                                            <td>{{obj.Acompanish ? obj.Acompanish : '-'}}</td>
                                            <!--<td>{{obj.Expiry_Date ? obj.Expiry_Date : '-'}}</td> -->
                                            <td>{{obj.Amount}}</td>
                                            <!-- <td>{{obj.Discount_Type ? obj.Discount_Type : '-'}}</td>
                                            <td>{{obj.Discount_Type_Amount}}</td>
                                            <td>{{obj.Discount}}</td> -->
                                            <td>
                                                <select style="width: 71px;" class="form-control" 
                                                 name="obj.DiscountType" 
                                                 [(ngModel)]="obj.Discount_Type"
                                                 (ngModelChange)="DiscChangeFortable(obj)">
                                                   <option  [ngValue]="undefined">Select</option>
                                                   <option value ="%">%</option>
                                                   <option value ="AMT">AMT</option>
                                                </select>
                                            </td>
                                            <td>
                                                <input type="text"
                                                    class="form-control"
                                                    name="obj.DiscountTypeAmt"
                                                    [(ngModel)]="obj.Discount_Type_Amount"
                                                    (ngModelChange)="AfterDiscCalChangeForTable(obj)"
                                                    [disabled]="!obj.Discount_Type"
                                                    placeholder="Discount"
                                                    CompacctDigitonly="true"
                                                    style="width: 71px;">
                                            </td>
                                            <td>
                                                <input type="text"
                                                  class="form-control"
                                                  name="obj.DiscountAmt"
                                                  [(ngModel)]="obj.Discount"
                                                  placeholder="Discount AMT"
                                                  CompacctDigitonly="true"
                                                  style="width: 71px;"
                                                  disabled>
                                            </td>
                                            <td>{{obj.Taxable_Amount}}</td>
                                            <td>{{obj.CGST_Rate}}</td>
                                            <td>{{obj.CGST_Amount}}</td>
                                            <td>{{obj.SGST_Rate}}</td>
                                            <td>{{obj.SGST_Amount}}</td>
                                            <td>{{obj.IGST_Rate}}</td>
                                            <td>{{obj.IGST_Amount}}</td>
                                            <td>{{getTofix(obj.Gross_Amount)}}</td>
                                            <td nowrap>{{obj.Cost_Cen_Name ? obj.Cost_Cen_Name : '-'}}</td>
                                            <td nowrap>{{obj.Godown_Name ? obj.Godown_Name : '-'}}</td>
                                            <td>{{obj.AO_Product ? obj.AO_Product : '-'}}</td>
                                            <td>{{obj.AO_Qty ? obj.AO_Qty : '-'}}</td>
                                            <td nowrap>{{obj.AO_Order_No ? obj.AO_Order_No : '-'}}</td>
                                            <!-- <td>{{obj.Pur_Order_No ? obj.Pur_Order_No : '-'}}</td> -->
                                            <td><button (click)="delete(ind)" class="btn danger"><i class="fa fa-trash"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <br>
                        <hr class="box boxboxDivide-primary" /><!-- *ngIf="hideTerm" -->
                        <form #TermForm="ngForm" novalidate>
                        <div class="form-group">
                                <div class="col-sm-3">
                                 <label class="control-label">Term Name<sup class="text-danger">*</sup></label>
                                 <select class="form-control" name="termname" #termname="ngModel" [(ngModel)]="ObjTerm.Term_ID"
                                    [ngClass]="{clearance: TermFormSubmitted && termname?.errors?.required}"
                                    (change)="TermChange()" required >
                                 <option [ngValue]="undefined">Select</option>
                                 <option *ngFor="let option of TermList" [ngValue]="option.Term_ID">{{ option.Term_Name }}</option>
                                </select>
                             </div>
                            <div class="col-sm-2">
                              <label>HSN No<sup class="text-danger"></sup></label>
                                <input class="form-control" name="HSNNo" [(ngModel)]="ObjTerm.HSN_No" required="true" disabled="true" placeholder="HSN No" />
                            </div>
                            <div class="col-sm-2">
                              <label>Term Amount<sup class="text-danger">*</sup></label>
                                <input class="form-control" name="termamount" #termamount="ngModel" [(ngModel)]="ObjTerm.Term_Amount"
                                  [ngClass]="{clearance: TermFormSubmitted && termamount?.errors?.required}"
                                  required="true" CompacctDigitonly="true" placeholder="Term Amount" />
                            </div>
                           <button *ngIf="ObjTerm.Term_Amount" type="submit" class="btn btn-primary custombutton" (click)="AddTerm(TermForm.form.valid)">
                            <span class="glyphicon glyphicon-plus"></span>Add
                           </button>
                        </div>
                    <br>
                    <div class="table-responsive no-padding">
                        <table class="table table-bordered">
                         <thead style="background-color:#3c8dbc;color:white;">
                            <tr style="background-color:#3c8dbc;color:white;">
                              <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Sl. No.</th>
                              <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Term Name</th>
                              <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">HSN No</th>
                              <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Term Amount</th>
                              <th colspan="2" scope="colgroup" class="text-center">CGST</th>
                              <th colspan="2" scope="colgroup" class="text-center">SGST</th>
                              <th colspan="2" scope="colgroup" class="text-center">IGST</th>
                              <th rowspan="2" class="text-center" style="vertical-align:middle">Delete</th>
                            </tr>
                            <tr style="background-color:#3c8dbc;color:white">
                               <th scope="col" class="text-center">Rate</th>
                               <th scope="col" class="text-center">Amt.</th>
                               <th scope="col" class="text-center">Rate</th>
                               <th scope="col" class="text-center">Amt.</th>
                               <th scope="col" class="text-center">Rate</th>
                               <th scope="col" class="text-center">Amt.</th>
                            </tr>
                         </thead>
                        <tbody>
                            <tr *ngFor=" let TermTableList of AddTermList; let ind = index; let odd = odd;" [class.even]="odd">
                              <td>{{ ind + 1  }}</td>
                              <td>{{ TermTableList.Term_Name }}</td>
                              <td>{{ TermTableList.HSN_No }}</td>
                              <td>{{ TermTableList.Term_Amount }}</td>
                              <td>{{ TermTableList.CGST_Rate }}</td>
                              <td>{{ TermTableList.CGST_Amount }}</td>
                              <td>{{ TermTableList.SGST_Rate }}</td>
                              <td>{{ TermTableList.SGST_Amount }}</td>
                              <td>{{ TermTableList.IGST_Rate }}</td>
                              <td>{{ TermTableList.IGST_Amount }}</td>
                              <td><button (click)="DeteteTerm(ind)" class="btn danger"><i class="fa fa-trash"></i></button></td>
                            </tr>
                        </tbody>
                       </table>
                    </div>
                </form>
                <br>
                <div class="col-sm-4" *ngIf="AddProductDetails.length">
                  <label class="control-label">TCS Tax Required <sup class="text-danger">*</sup> </label>
                  <select class="form-control" 
                  name="tcstaxreq" 
                  #tcstaxreq="ngModel" 
                  [(ngModel)]="ObjSaleBillNew.TCSTaxRequired"
                  (ngModelChange)="TcsAmtCalculation()"
                  [ngClass]="{'clearance': TCSTaxRequiredValidation && tcstaxreq?.errors?.required}" required>
                     <option  [ngValue]="undefined">Select</option>
                     <option value ="YES">YES</option>
                     <option value ="NO">NO</option>
                </select>
              </div>
                        <br>
                        <br>

                            <div class="col-xs-12">
                                <div class="table-responsive">
                                  <table class="table">
                                    <tbody>
                                    <tr>
                                      <th>Total Amount:</th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.Total_Amount}}</td>
                                      <th>Term Amount :</th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.Term_Amt}}</td>
                                      <th>IGST Amount:</th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.IGST_Amt}}</td>
                                      <th>Rounded Off :</th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.Rounded_Off}}</td>
                                      <!-- ngIf: ctrl.TCSflag -->
                                      <!-- ngIf: ctrl.TCSflag -->
                                    </tr>
                                    <tr>
                                      <th>Discount Amount :</th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.Discount_Amount}}</td>
                                      <th>CGST Amount :</th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.CGST_Amt}}</td>
                                      <th>Gross Amount : </th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.Gross_Amt}}</td>
                                      <th>Net Amount : </th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.Grand_Total}}</td>
                                    </tr>
                                    <tr>
                                      <th>Taxable Amount :</th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.Taxable_Amt}}</td>
                                      <th>SGST Amount :</th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.SGST_Amt}}</td>
                                      <th>TCS Amount :</th>
                                      <td class="amt-td ng-binding">{{ObjSaleBillNew.TCS_Amount}}</td>
                                    </tr>

                                  </tbody></table>
                                </div>
                              </div>
                            <br>
                            <!-- </form> -->
                            <hr class="box boxboxDivide-primary ng-scope">
                            <div class="box-footer">
                                <button class="btn btn-primary pull-right" (click)="SavePurchaseBill(SaleBillNewForm.form.valid)" id="load" [disabled]="Spinner">
                           <p-progressSpinner *ngIf="Spinner" [style]="{width: '15px', height: '15px'}" strokeWidth="8"  animationDuration=".5s"></p-progressSpinner>
                       <span *ngIf="!Spinner" class="glyphicon glyphicon-save"></span>{{buttonname}}
                   </button>
                            </div>
                        </p-tabPanel>

                    </p-tabView>
                </div>
            </div>
        </div>
    </div>
</div>


